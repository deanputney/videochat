(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{3:function(e,t,n){"use strict";function i(){document.querySelector("nav").classList.toggle("nav-grid--expanded")}n.d(t,"a",(function(){return i}))},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(0),a=n(36),o=n.n(a),r=n(37),s=n(19),l=n(38);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=n(44),u=n(45),p=n(46),v=n(47),m=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showHelpers=!t||void 0===t.showHelpers||t.showHelpers,this.canvas=document.getElementById("application-canvas"),this.container=document.querySelector("main .canvas-container-inner"),this.createTooltip(),this.textureLoader=new i.TextureLoader,s.webgl)this.bindEventHandlers(),this.init(this.canvas),this.render();else{var n=s.getWebGLErrorMessage();this.container.appendChild(n)}}var t,n,a;return t=e,(n=[{key:"bindEventHandlers",value:function(){this.handleClick=this.handleClick.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleResize=this.handleResize.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this)}},{key:"init",value:function(e){this.setupLocalVideo(),window.addEventListener("resize",this.handleResize),this.setupScene(),this.setupRenderer(e),this.setupCamera(),new r.a(this.renderer,this.scene,this.camera),this.setupLights(),this.showHelpers&&this.setupHelpers(),this.setupRay(),this.setupControls(),this.addFloor(100,100),this.addVideoGroup(20)}},{key:"render",value:function(){var e=this;this.controls.update(),this.updateVideoCylinder(),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.render()}))}},{key:"createTooltip",value:function(){var e=document.querySelector("main");e||alert("You have no '<main>' tag on ythe HTML page. You need exactly ONE");var t=document.createElement("div");t.setAttribute("class","tooltip"),t.setAttribute("data-cy","tooltip"),e.appendChild(t),this.tooltip=t}},{key:"setupLocalVideo",value:function(){var e=this;this.localVideo=document.getElementById("local-video"),console.log("localVideo",this.localVideo),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"user"}}).then((function(t){console.log("localVideo",e.localVideo),e.localVideo.srcObject=t,e.localVideo.play()})).catch((function(e){console.error("Unable to access the camera/webcam.",e)})):console.error("MediaDevices interface not available.")}},{key:"handleClick",value:function(e){}},{key:"handleMouseMove",value:function(e){var t=c(this.getNDCCoordinates(e),2);t[0],t[1]}},{key:"handleResize",value:function(e){var t=this.container,n=t.clientWidth,i=t.clientHeight;this.camera.aspect=n/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,i)}},{key:"showTooltip",value:function(e){var t=e.target,n=t.name,i=(t.uuid,t.type),a=e.data.global,o=a.x,r=a.y,s=c(this.getScreenCoordinates(o,r),2),l=s[0],d=s[1];this.tooltip.innerHTML="<h4>".concat(n," (").concat(i,")</h4><span><em>Click to cast a ray</em></span>");var h="left: ".concat(l,"px; top: ").concat(d,"px; visibility: visible; opacity: 0.8");this.tooltip.style=h}},{key:"hideTooltip",value:function(e){this.tooltip.style="visibility: hidden"}},{key:"setupScene",value:function(){this.scene=new i.Scene,this.scene.autoUpdate=!0;var e=window.getComputedStyle(this.container),t=new i.Color(e.getPropertyValue("background-color"));this.scene.background=t,this.scene.fog=null,this.scene.name="My Three.js Scene"}},{key:"setupRenderer",value:function(e){this.renderer=new i.WebGLRenderer({antialias:!0,canvas:e}),this.renderer.setClearColor(2236962),this.renderer.setPixelRatio(window.devicePixelRatio||1);var t=this.container,n=t.clientWidth,a=t.clientHeight;this.renderer.setSize(n,a),this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.renderer.domElement.addEventListener("click",this.handleClick),this.renderer.domElement.addEventListener("mousemove",this.handleMouseMove)}},{key:"setupCamera",value:function(){var e=this.container,t=e.clientWidth/e.clientHeight;this.camera=new i.PerspectiveCamera(75,t,.1,1e4),this.camera.name="Perspective Camera",this.camera.position.set(100,100,100),this.camera.lookAt(this.scene.position)}},{key:"setupLights",value:function(){var e=new i.DirectionalLight(4620980,1);e.name="Directional Light",e.position.set(120,30,-200),e.castShadow=!0,e.shadow.camera.near=10,this.scene.add(e);var t=new i.SpotLight(16755285);t.name="Spotlight",t.position.set(120,30,0),t.castShadow=!0,e.shadow.camera.near=10,this.scene.add(t);var n=new i.AmbientLight(16755285);this.scene.add(n)}},{key:"setupHelpers",value:function(){var e=new i.GridHelper(200,16);e.name="Floor GridHelper",this.scene.add(e);var t=new i.AxesHelper(75);t.name="XYZ AzesHelper",this.scene.add(t);var n=this.scene.getObjectByName("Directional Light");new i.DirectionalLightHelper(n,10).name="".concat("Directional Light"," Helper"),new i.CameraHelper(n.shadow.camera).name="".concat("Directional Light"," Shadow Camera Helper");var a=this.scene.getObjectByName("Spotlight");new i.SpotLightHelper(a).name="".concat("Spotlight"," Helper"),new i.CameraHelper(a.shadow.camera).name="".concat("Spotlight"," Shadow Camera Helper")}},{key:"setupRay",value:function(){this.raycaster=new i.Raycaster}},{key:"addFloor",value:function(e,t){var n=this,a=new i.PlaneGeometry(e,t,1,1);this.textureLoader.load(h,(function(e){e.wrapS=i.RepeatWrapping,e.wrapT=i.RepeatWrapping,e.repeat.set(4,4);var t=new i.MeshBasicMaterial({map:e,side:i.DoubleSide}),o=new i.Mesh(a,t);o.name="Floor",o.position.y=-.5,o.rotation.x=Math.PI/2,n.scene.add(o),o.cursor="pointer",o.on("mouseover",n.showTooltip),o.on("mouseout",n.hideTooltip)}),void 0,(function(e){alert("Impossible to load the texture ".concat(h))}))}},{key:"setupControls",value:function(){this.controls=new o.a(this.camera,this.renderer.domElement),this.controls.enabled=!0,this.controls.maxDistance=1500,this.controls.minDistance=0,this.controls.autoRotate=!0}},{key:"setupGUI",value:function(){var e=new l.GUI;e.add(this.camera.position,"x").name("Camera X").min(0).max(100),e.add(this.camera.position,"y").name("Camera Y").min(0).max(100),e.add(this.camera.position,"z").name("Camera Z").min(0).max(100)}},{key:"addCustomMesh",value:function(){this.delta=0;var e=new i.ShaderMaterial({vertexShader:p,fragmentShader:v,uniforms:{delta:{value:0}}}),t=new i.SphereBufferGeometry(5,32,32);this.vertexDisplacement=new Float32Array(t.attributes.position.count);for(var n=0;n<this.vertexDisplacement.length;n+=1)this.vertexDisplacement[n]=Math.sin(n);t.setAttribute("vertexDisplacement",new i.BufferAttribute(this.vertexDisplacement,1));var a=new i.Mesh(t,e);a.name="Custom Mesh",a.position.set(5,5,5),this.scene.add(a)}},{key:"updateCustomMesh",value:function(){this.delta+=.1;var e=this.scene.getObjectByName("Custom Mesh");e.material.uniforms.delta.value=.5+.5*Math.sin(this.delta);for(var t=0;t<this.vertexDisplacement.length;t+=1)this.vertexDisplacement[t]=.5+.25*Math.sin(t+this.delta);e.geometry.attributes.vertexDisplacement.needsUpdate=!0}},{key:"addCube",value:function(e){var t=new i.CubeGeometry(e,e,e),n=new i.MeshLambertMaterial({color:16497669}),a=new i.Mesh(t,n);a.name="Cube",a.position.set(0,e/2,0),this.scene.add(a),a.cursor="pointer",a.on("mouseover",this.showTooltip),a.on("mouseout",this.hideTooltip)}},{key:"addVideoGroup",value:function(e){var t=this,n=new i.CylinderGeometry(e,e,2,32),a=new i.VideoTexture(this.localVideo);a.wrapS=i.ClampToEdgeWrapping,a.wrapT=i.ClampToEdgeWrapping,a.flipY=!1;var o=new i.MeshBasicMaterial({map:a}),r=new i.Mesh(n,o);r.name="LocalVideoCylinder",r.rotation.set(Math.PI/2,-Math.PI/2,0);var s=new i.Group;s.name="LocalVideoGroup",s.add(r),s.position.set(0,e,0),this.scene.add(s),r.cursor="pointer",r.on("mouseover",this.showTooltip),r.on("mouseout",this.hideTooltip),this.localVideo.addEventListener("loadeddata",(function(){var e=t.localVideo.videoHeight/t.localVideo.videoWidth;a.repeat.set(e,1),a.offset.x=.25}))}},{key:"updateVideoCylinder",value:function(){this.scene.getObjectByName("LocalVideoGroup").lookAt(this.camera.position)}},{key:"addParticleSystem",value:function(e,t,n){var a=this,o=new i.Geometry,r=Array(e).fill(n).map(y);o.vertices=r,this.textureLoader.load(u,(function(e){var n=new i.PointsMaterial({alphaTest:.5,map:e,size:t,transparent:!0}),r=new i.Points(o,n);r.name="Stars",r.position.set(-50,50,-50),a.scene.add(r),r.cursor="pointer",r.on("mouseover",a.showTooltip),r.on("mouseout",a.hideTooltip)}),void 0,(function(e){alert("Impossible to load the texture ".concat(u))}))}},{key:"addGroupObject",value:function(e,t){var n=new i.Group;n.name="Group of Boxes";var a=t.depth,o=t.height,r=t.spread,s=t.width,l=new i.BoxGeometry(s,o,a),c=Array(e).fill({geometry:l,spread:r}).map(f),d=!0,h=!1,u=void 0;try{for(var p,v=c[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var m=p.value;n.add(m)}}catch(e){h=!0,u=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw u}}n.position.set(50,20,50),this.scene.add(n),n.cursor="pointer",n.on("mouseover",this.showTooltip),n.on("mouseout",this.hideTooltip)}},{key:"getNDCCoordinates",value:function(e,t){var n=this.renderer.domElement,i=n.clientHeight,a=n.clientWidth,o=n.offsetLeft,r=n.offsetTop,s=e.clientX-o,l=s/a*2-1,c=e.clientY-r,d=-c/i*2+1;if(t){var h={"Screen Coords (px)":{x:e.screenX,y:e.screenY},"Canvas-Relative Coords (px)":{x:s,y:c},"NDC (adimensional)":{x:l,y:d}};console.table(h,["x","y"])}return[l,d]}},{key:"getScreenCoordinates",value:function(e,t){var n=document.querySelector(".single-responsive-element"),i=this.canvas.getBoundingClientRect(),a=n.getBoundingClientRect(),o=i.x-a.x,r=i.y-a.y;return[(e+1)/2*i.width+o,-.5*(t-1)*i.height+r]}}])&&d(t.prototype,n),a&&d(t,a),e}();function y(e,t){var n=new i.Vector3;return n.x=i.Math.randFloatSpread(e.spread.x),n.y=i.Math.randFloatSpread(e.spread.y),n.z=i.Math.randFloatSpread(e.spread.z),n}function f(e,t){var n=new i.MeshLambertMaterial({color:16777215*Math.random()}),a=new i.Mesh(e.geometry,n);return a.name="Box ".concat(t," in GroupObject"),a.position.x=i.Math.randFloatSpread(e.spread.x),a.position.y=i.Math.randFloatSpread(e.spread.y),a.position.z=i.Math.randFloatSpread(e.spread.z),a.rotation.x=360*Math.random()*(Math.PI/180),a.rotation.y=360*Math.random()*(Math.PI/180),a.rotation.z=360*Math.random()*(Math.PI/180),a}},43:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),i=n(35),a=n(3),o=(n(7),n(20)),r=n.n(o),s=n(21),l=n.n(s);window.toggleMobileNav=a.a,window.app=new i.a,window.vg=window.app.scene.getObjectByName("LocalVideoGroup"),window.THREE=t,console.log(r.a),e.io=l.a,console.log("io",l.a);var c=new r.a;window.connection=c,c.socketURL="https://rtcmulticonnection.herokuapp.com:443/",c.session={audio:!0,video:!0},c.videosContainer=document.getElementById("videos"),c.openOrJoin("your-room-id")}.call(this,n(10))},44:function(e,t,n){e.exports=n.p+"textures/checkerboard.bda67ca60caae86413aec7e10112ac3e.jpg"},45:function(e,t,n){e.exports=n.p+"textures/star.0875fc7146a00ddc30bb221db0dcef90.png"},46:function(e,t){e.exports="attribute float vertexDisplacement;\nuniform float delta;\nvarying float vOpacity;\nvarying vec3 vUv;\n\nvoid main() {\n    vUv = position;\n    vOpacity = vertexDisplacement;\n\n    vec3 p = position;\n\n    p.x += sin(vertexDisplacement) * 50.0;\n    p.y += cos(vertexDisplacement) * 50.0;\n\n    vec4 modelViewPosition = modelViewMatrix * vec4(p, 1.0);\n    gl_Position = projectionMatrix * modelViewPosition;\n}\n"},47:function(e,t){e.exports="uniform float delta;\nvarying float vOpacity;\nvarying vec3 vUv;\n\nvoid main() {\n    float r = 1.0 + cos(vUv.x * delta);\n    float g = 0.5 + sin(delta) * 0.5;\n    float b = 0.0;\n    vec3 rgb = vec3(r, g, b);\n\n    gl_FragColor = vec4(rgb, vOpacity);\n}"},71:function(e,t){}},[[43,0,8,1]]]);
//# sourceMappingURL=home.5366e8782dd4603b25c1.js.map